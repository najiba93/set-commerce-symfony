{% extends 'base.html.twig' %}

{% block title %}Mon Panier
{% endblock %}

{% block main %}
	<div class="container mt-5">
		<h2 class="mb-4">Mon Panier</h2>

		{% if panier is empty %}
			<div class="alert alert-info">Votre panier est vide.</div>
		{% else %}

			<div class="table-responsive">
				<table class="table table-bordered table-responsive table-striped align-middle">

					<thead>
						<tr class="text-center align-middle">
							<th>Image</th>
							<th>Produit</th>
							<th>Quantit√©</th>
							<th>Prix unitaire</th>

							<th>Sous-total</th>
							<thqua>üóëÔ∏è</thqua>
						</tr>

					</thead>
					<tbody>
						{% for item in panier %}
							<tr class="text-center align-middle">
								<td>
									{% if item.produit.images|length > 0 %}
										<img src="{{ asset(item.produit.images[0].url) }}" alt="{{ item.produit.nom }}" class="img-panier">
									{% else %}
										<img src="{{ asset('images/default.jpg') }}" alt="Image par d√©faut" class="img-panier">
									{% endif %}
								</td>


								<td>{{ item.produit.nom }}</td>
								<td>
									<form method="post" action="{{ path('modifier_quantite_panier', {id: item.produit.id}) }}" class="d-flex align-items-center justify-content-center" style="gap:5px;">
										<button type="submit" name="action" value="moins" class="btn btn-outline-secondary btn-sm">‚àí</button>
										<span>{{ item.quantite }}  </span>
										<button type="submit" name="action" value="plus" class="btn btn-outline-secondary btn-sm">+</button>
									</form>
								</td>
								<td>{{ item.produit.prix }}
									‚Ç¨</td>
								<td>{{ item.sousTotal }}
									‚Ç¨</td>


								<td class="text-center">
									<a href="{{ path('supprimer_du_panier', {id: item.produit.id}) }}" class="btn  btn-sm" title="Retirer">
										üóëÔ∏è
									</a>
								</td>

							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
			<div class="text-end">
				<h4>Total :
					{{ total }}
					‚Ç¨ TTC</h4>
				<div class="mt-3">
					<a href="{{ path('finaliser_commande') }}" class="btn btn-success btn-lg">
						<i class="fas fa-shopping-cart"></i> Finaliser ma commande
					</a>
				</div>
			</div>
		{% endif %}
	</div>

{% endblock %}
